<!DOCTYPE html>
<html lang="{{lang}}">
<head>
    <meta charset="UTF-8">
    <title>{{#if pageTitle}}{{pageTitle}}{{else}}{{siteName}} &mdash; Default Title{{/if}}</title>
    {{!-- Stylesheet links --}}
    {{#each stylesheets}}
        <link rel="stylesheet" href="{{url}}" {{#if media}}media="{{media}}"{{/if}}>
    {{/each}}
</head>
<body class="{{bodyClass}} {{#if user.isAdmin}}is-admin{{/if}} {{#unless user.verified}}unverified{{/unless}}">

{{!-- ==================== HEADER ==================== --}}
<header id="site-header" {{#if sticky}}data-sticky="true"{{/if}}>
    <nav>
        <a class="logo" href="{{rootUrl}}">
            {{{logoHtml}}}
            <span>{{siteName}}</span>
        </a>

        <ul class="nav-links">
            {{#each navItems}}
                <li class="{{#if active}}active{{/if}} {{#if disabled}}disabled{{/if}}">
                    <a href="{{url}}" {{#if newTab}}target="_blank" rel="noopener"{{/if}}>
                        {{#if icon}}<i class="icon-{{icon}}"></i>{{/if}}
                        {{label}}
                        {{#if badge}}<span class="badge">{{badge}}</span>{{/if}}
                    </a>
                    {{#if children}}
                        <ul class="dropdown">
                            {{#each children}}
                                <li><a href="{{url}}">{{label}}</a></li>
                            {{/each}}
                        </ul>
                    {{/if}}
                </li>
            {{/each}}
        </ul>

        {{#if user}}
            <div class="user-menu">
                <img src="{{user.avatar}}" alt="{{user.name}}" width="32" height="32">
                <span>{{user.name}}</span>
                <ul class="user-dropdown">
                    <li><a href="/profile/{{user.id}}">{{t "nav.profile"}}</a></li>
                    <li><a href="/settings">{{t "nav.settings"}}</a></li>
                    {{#if user.isAdmin}}<li><a href="/admin">{{t "nav.admin"}}</a></li>{{/if}}
                    <li class="divider"></li>
                    <li><a href="/logout">{{t "nav.logout"}}</a></li>
                </ul>
            </div>
        {{else}}
            <a class="btn btn-primary" href="/login">{{t "nav.login"}}</a>
        {{/if}}
    </nav>
</header>

{{!-- ==================== ALERTS ==================== --}}
{{#each alerts}}
    <div class="alert alert-{{type}} {{#if dismissible}}alert-dismissible{{/if}}" role="alert">
        {{#if icon}}<i class="icon-{{icon}}"></i>{{/if}}
        {{{message}}}
        {{#if dismissible}}<button type="button" class="close" data-dismiss="alert">&times;</button>{{/if}}
    </div>
{{/each}}

{{!-- ==================== MAIN CONTENT ==================== --}}
<main id="main-content">
    <div class="container{{#if fluid}}-fluid{{/if}}">

        {{!-- Breadcrumbs --}}
        {{#if breadcrumbs}}
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    {{#each breadcrumbs as |crumb idx|}}
                        <li class="breadcrumb-item{{#if @last}} active{{/if}}">
                            {{#if @last}}
                                {{crumb.label}}
                            {{else}}
                                <a href="{{crumb.url}}">{{crumb.label}}</a>
                            {{/if}}
                        </li>
                    {{/each}}
                </ol>
            </nav>
        {{/if}}

        {{!-- Page heading --}}
        <div class="page-header">
            <h1>
                {{{heading}}}
                {{#if headingBadge}}<span class="badge badge-{{headingBadge.type}}">{{headingBadge.text}}</span>{{/if}}
            </h1>
            {{#if subheading}}<p class="lead">{{subheading}}</p>{{/if}}
            {{#if actions}}
                <div class="page-actions">
                    {{#each actions}}
                        <a href="{{url}}" class="btn btn-{{#if primary}}primary{{else}}secondary{{/if}}{{#if size}} btn-{{size}}{{/if}}">
                            {{#if icon}}<i class="icon-{{icon}}"></i> {{/if}}{{label}}
                        </a>
                    {{/each}}
                </div>
            {{/if}}
        </div>

        {{!-- Data table --}}
        {{#if items}}
            <div class="table-responsive">
                <table class="table table-striped{{#if hoverable}} table-hover{{/if}}{{#if bordered}} table-bordered{{/if}}">
                    <thead>
                    <tr>
                        {{#each columns}}
                            <th {{#if width}}style="width:{{width}}"{{/if}} class="{{#if sortable}}sortable{{/if}}{{#if (eq currentSort.key key)}} sort-{{currentSort.dir}}{{/if}}">
                                {{#if sortable}}
                                    <a href="{{../sortBaseUrl}}?sort={{key}}&dir={{#if (and (eq ../currentSort.key key) (eq ../currentSort.dir "asc"))}}desc{{else}}asc{{/if}}">
                                    {{label}}
                                    </a>
                                {{else}}
                                    {{label}}
                                {{/if}}
                            </th>
                        {{/each}}
                        {{#if showActions}}<th class="actions-col">{{t "table.actions"}}</th>{{/if}}
                    </tr>
                    </thead>
                    <tbody>
                    {{#each items as |item i|}}
                        <tr class="{{#if item.deleted}}deleted{{/if}} {{#if (eq @index ../selectedIndex)}}selected{{/if}}" data-id="{{item.id}}">
                            {{#each ../columns}}
                                <td class="col-{{key}}{{#if item.highlighted}} highlighted{{/if}}">
                                    {{#if (eq type "boolean")}}
                                        {{#if (lookup item key)}}<i class="icon-check text-success"></i>{{else}}<i class="icon-times text-muted"></i>{{/if}}
                                    {{else if (eq type "date")}}
                                        <time datetime="{{formatDate (lookup item key) "Y-m-d"}}">{{formatDate (lookup item key) format}}</time>
                                    {{else if (eq type "currency")}}
                                        {{formatCurrency (lookup item key) ../currency}}
                                    {{else if (eq type "link")}}
                                        <a href="{{replace linkTemplate "{id}" item.id}}">{{lookup item key}}</a>
                                    {{else}}
                                        {{lookup item key}}
                                    {{/if}}
                                </td>
                            {{/each}}
                            {{#if ../showActions}}
                                <td class="actions">
                                    {{#each ../rowActions}}
                                        {{#unless (and requiresAdmin (not ../item.isAdmin))}}
                                            <a href="{{replace urlTemplate "{id}" ../item.id}}"
                                               class="btn btn-sm btn-{{style}}"
                                               {{#if confirm}}data-confirm="{{t confirmKey}}"{{/if}}
                                               title="{{t labelKey}}">
                                                <i class="icon-{{icon}}"></i>
                                            </a>
                                        {{/unless}}
                                    {{/each}}
                                </td>
                            {{/if}}
                        </tr>
                    {{else}}
                        <tr><td colspan="{{columnCount}}" class="empty-message">{{t "table.empty"}}</td></tr>
                    {{/each}}
                    </tbody>
                    {{#if showTotals}}
                        <tfoot>
                        <tr class="totals">
                            {{#each columns}}
                                <td>{{#if showTotal}}{{formatCurrency (lookup ../totals key) ../../currency}}{{/if}}</td>
                            {{/each}}
                            {{#if ../showActions}}<td></td>{{/if}}
                        </tr>
                        </tfoot>
                    {{/if}}
                </table>
            </div>

            {{!-- Pagination --}}
            {{#if pagination}}
                <nav aria-label="{{t "pagination.label"}}">
                    <ul class="pagination {{#if pagination.small}}pagination-sm{{/if}}">
                        <li class="page-item{{#unless pagination.hasPrev}} disabled{{/unless}}">
                            <a class="page-link" href="{{pagination.prevUrl}}">&laquo; {{t "pagination.prev"}}</a>
                        </li>
                        {{#each pagination.pages}}
                            <li class="page-item{{#if active}} active{{/if}}{{#if ellipsis}} disabled{{/if}}">
                                {{#if ellipsis}}
                                    <span class="page-link">&hellip;</span>
                                {{else}}
                                    <a class="page-link" href="{{url}}">{{number}}</a>
                                {{/if}}
                            </li>
                        {{/each}}
                        <li class="page-item{{#unless pagination.hasNext}} disabled{{/unless}}">
                            <a class="page-link" href="{{pagination.nextUrl}}">{{t "pagination.next"}} &raquo;</a>
                        </li>
                    </ul>
                    <p class="pagination-summary">
                        {{t "pagination.showing" start=pagination.start end=pagination.end total=pagination.total}}
                    </p>
                </nav>
            {{/if}}

        {{else}}

        {{!-- Empty state --}}
            <div class="empty-state">
                {{#if emptyState.illustration}}{{{emptyState.illustration}}}{{/if}}
                <h3>{{emptyState.heading}}</h3>
                {{#if emptyState.message}}<p>{{emptyState.message}}</p>{{/if}}
                {{#if emptyState.action}}
                    <a href="{{emptyState.action.url}}" class="btn btn-primary">{{emptyState.action.label}}</a>
                {{/if}}
            </div>

        {{/if}}

        {{!-- Sidebar panels --}}
        {{#each sidePanels}}
            <aside class="side-panel{{#if collapsible}} collapsible{{#if collapsed}} collapsed{{/if}}{{/if}}" id="panel-{{id}}">
                <div class="panel-header">
                    <h4>{{title}}</h4>
                    {{#if collapsible}}<button class="toggle" aria-expanded="{{#if collapsed}}false{{else}}true{{/if}}"></button>{{/if}}
                </div>
                <div class="panel-body">
                    {{#if (eq type "list")}}
                        <ul>
                            {{#each items}}<li>{{#if url}}<a href="{{url}}">{{/if}}{{label}}{{#if url}}</a>{{/if}}{{#if count}} <span class="count">({{count}})</span>{{/if}}</li>{{/each}}
                        </ul>
                    {{else if (eq type "stats")}}
                        <dl class="stats">
                            {{#each stats}}
                                <dt>{{label}}</dt>
                                <dd class="{{#if trend}}trend-{{trend}}{{/if}}">
                                    {{value}}{{#if unit}} {{unit}}{{/if}}
                                    {{#if delta}}<small class="delta">{{#if (gt delta 0)}}+{{/if}}{{delta}}</small>{{/if}}
                                </dd>
                            {{/each}}
                        </dl>
                    {{else if (eq type "html")}}
                        {{{content}}}
                    {{/if}}
                </div>
            </aside>
        {{/each}}

    </div>
</main>

{{!-- ==================== FOOTER ==================== --}}
<footer id="site-footer">
    <div class="container">
        <div class="footer-cols">
            {{#each footerColumns}}
                <div class="footer-col">
                    {{#if heading}}<h5>{{heading}}</h5>{{/if}}
                    <ul>
                        {{#each links}}
                            <li><a href="{{url}}"{{#if external}} target="_blank" rel="noopener noreferrer"{{/if}}>{{label}}</a></li>
                        {{/each}}
                    </ul>
                </div>
            {{/each}}
        </div>
        <div class="footer-bottom">
            <p>{{copyright}} {{#if showYear}}{{currentYear}}{{/if}} {{siteName}}</p>
            {{#if social}}
                <ul class="social-links">
                    {{#each social}}
                        <li><a href="{{url}}" aria-label="{{name}}"><i class="icon-{{icon}}"></i></a></li>
                    {{/each}}
                </ul>
            {{/if}}
        </div>
    </div>
</footer>

{{!-- ==================== SCRIPTS ==================== --}}
{{#each scripts}}
    <script src="{{url}}"{{#if defer}} defer{{/if}}{{#if async}} async{{/if}}{{#if integrity}} integrity="{{integrity}}" crossorigin="anonymous"{{/if}}></script>
{{/each}}
{{#if inlineScript}}
    <script>
            {{{inlineScript}}}
    </script>
{{/if}}

</body>
</html>
